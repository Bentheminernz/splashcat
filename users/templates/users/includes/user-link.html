{% load static %}
{% if user.username %}
    <a class="flex flex-col gap-2 items-center w-fit" href="{% url 'profile' user.username %}">
        {% if user.profile_cover and user.profile_picture %}
            <!-- If both profile cover and profile picture exist -->
            <div class="relative w-full pb-12">
                <img src="{{ user.profile_cover.url }}?width=700"
                    alt="{{ user.display_name }}'s profile cover"
                    class="max-w-[350px] max-h-56 w-full object-cover rounded">
                <img src="{{ user.profile_picture.url }}?width=256"
                    alt="{{ user.display_name }}'s profile picture"
                    class="aspect-square w-1/5 object-cover rounded-xl shadow-2xl bottom-0 left-3 absolute">
                <div class="flex flex-col absolute bottom-0 left-1/4">
                    <div class="text-xl">
                        {{ user.display_name }}
                        {% if user.display_sponsor_badge %}
                            <img src="{% static 'images/splashcat-sponsor-badge.png' %}" alt="Splashcat Sponsor"
                                class="h-6 inline-block [image-rendering:pixelated]">
                        {% endif %}
                    </div>
                    <div class="text-sm text-gray-400">@{{ user.username }}</div>
                </div>
            </div>
        {% else %}
            <!-- When there's no profile cover and/or picture -->
            <div class="w-full flex flex-col gap-2">
                <div class="flex items-center w-fit {% if not user.profile_picture %}pl-4{% endif %}">
                    {% if user.profile_picture %}
                        <img src="{{ user.profile_picture.url }}?optimizer=image&height=72&width=72"
                            alt="{{ user.display_name }}"
                            class="h-12 w-12 object-cover rounded-lg">
                    {% endif %}

                    <div class="flex flex-col {% if not user.profile_picture %}items-start{% endif %}">
                        <div class="text-xl">
                            {{ user.display_name }}
                            {% if user.display_sponsor_badge %}
                                <img src="{% static 'images/splashcat-sponsor-badge.png' %}" alt="Splashcat Sponsor"
                                    class="h-6 inline-block [image-rendering:pixelated]">
                            {% endif %}
                        </div>
                        <div class="text-sm text-gray-400">@{{ user.username }}</div>
                    </div>
                </div>

                {% if show_splashtag == True %}
                    <div class="{% if not user.profile_picture %}pl-4{% endif %}">
                        {% with user.get_splashtag as splashtag %}
                            {% if splashtag %}
                                {% include "includes/splashtag.html" with splashtag=splashtag %}
                            {% endif %}
                        {% endwith %}
                    </div>
                {% endif %}
            </div>
        {% endif %}
    </a>
{% else %}
    <p>No username available</p>
{% endif %}
